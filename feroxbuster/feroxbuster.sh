#!/usr/bin/env bash

set -e
set -u

(echo -n "Start feroxbuster: " && date --rfc-3339=seconds) >> log

while read -r URL
do
	FILENAME=$(echo "${URL}" | sed 's/\:\/\//_/' | sed 's/\//__/g')
	feroxbuster -v -m GET,POST,PUT -o feroxbuster-"${FILENAME}".txt -u "${URL}" \
	-a "Mozilla/5.0 (X11; Linux x86_64; rv:109.0) Gecko/20100101 Firefox/115.0" \
	-w /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-big.txt \
	-t 10
done < targets

(echo -n "End feroxbuster: " && date --rfc-3339=seconds) >> log
